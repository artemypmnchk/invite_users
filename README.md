# Простая инструкция: Приглашение сотрудников в Пачку

Эта инструкция для тех, кто не занимается программированием.

---

## Что делает эта программа?
- Позволяет быстро пригласить сразу много сотрудников в Пачку, чтобы не делать эту работу вручную. Также пользователям можно будет проставить теги, чтобы массово добавлять их в чаты.

---

## Как подготовить список сотрудников?
1. Откройте файл `users.csv`.
2. Заполните строки по образцу:
   - email — электронная почта сотрудника (обязательно)
   - role — роль (обычно "user" или "admin")
   - first_name — имя
   - last_name — фамилия
   - nickname — никнейм (можно не заполнять)
   - department — отдел (можно не заполнять)
   - phone_number — телефон (можно не заполнять)
   - title — должность (можно не заполнять)
   - tags - список тегов. Используется, чтобы задать структуру компании по отделам и добавлять пользователей массово в чаты группами (можно не заполнять)  

   ## Как открыть CSV?

1. **Рекомендуемый способ:**
   - Откройте Excel.
   - Выберите: Данные → Получить данные → Из текста/CSV (или Data → Get Data → From Text/CSV).
   - Найдите свой файл users.csv.
   - В появившемся окне выберите кодировку **65001: Unicode (UTF-8)**.
   - Нажмите "Загрузить".

2. **Google Таблицы:**
   - Просто загрузите файл в Google Sheets — всё откроется корректно.

---

## Как получить токен администратора?
1. Войдите в Пачку под своей учёткой администратора.
2. Перейдите в автоматизации → API → скопируйте access_token администратора.
---

## Как создать файл `.env` и где его редактировать?

1. В папке с программой найдите файл `.env.example`. Скопируйте его и переименуйте в `.env` (точка в начале!).
2. Откройте файл `.env` в любом текстовом редакторе:
   - **VS Code** (удобнее всего)
   - **Блокнот (Notepad)** на Windows (при сохранении выбрать тип "Все файлы" и имя `.env`)
   - **TextEdit** на Mac (в меню "Формат" выбрать "Обычный текст" и сохранить как `.env`)
3. Вставьте свой токен вместо `ваш_токен_от_Пачки`.
4. Проверьте, чтобы строка с адресом API выглядела так:
   
   PACHCA_API_URL=https://api.pachca.com/api/shared/v1

---

## Как запустить приглашение?

1. Убедитесь, что на компьютере установлен язык программирования Ruby:
   - Для Mac чаще всего Ruby уже есть (но иногда его нужно обновить)
   - Для Windows Ruby нужно установить отдельно
   - Инструкция по установке Ruby на официальном сайте: https://www.ruby-lang.org/ru/documentation/installation/
   - Для Windows: https://rubyinstaller.org/
2. Откройте папку со скриптом в программе (например, VS Code) или через Проводник/Проводник Finder.
3. Откройте терминал в этой папке (или командную строку):
4. Введите по очереди команды:
   
   bundle install
   
   bundle exec ruby invite_users.rb

5. Если всё сделано правильно — увидите сообщения о том, что сотрудники приглашены (или ошибки, если что-то не так).

---

## FAQ (Частые вопросы)

**Q: Не запускается скрипт, пишет про ошибку с токеном**
A: Проверьте, что вы правильно указали токен администратора в файле `.env` (без пробелов и лишних символов).
---

## Безопасность
- Файл `.env` с токеном — это как ключ от вашей учетной записи. Не отправляйте его никому и не выкладывайте в интернет.
- Не публикуйте файл invite_users.log, если там есть личные данные сотрудников.
- После рассылки приглашений обязательно удалите токен из файла `.env`.

**Всё!** 